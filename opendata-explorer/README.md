Обновлено: 28.11.2017
___________________

В целом, сервис /NBUStatService/v1/ удовлетворяет большинству требований для работы Open Data Explorer.

1. Для создания формы запроса используются следующие ресурсы:

    1.1. Statdirectory: уточняются все группы наборов данных, а также их доступность по интервалам (periods), разрезам (dimensions) и дате ввода (entrydate).

    1.2. Statdirectory/{apikod}: уточняются все доступные наборы данных; для получения точного списка с {id_api} необходимо уточнять запрос с датами start= и end=, а также leveli= и parent= для правильного вывода иерархического дерева.

    1.3. Dimensions: уточняется название разреза по ранее полученному коду из Statdirectory.

    1.4. Dimensions/{dimension}: уточняется перечень доступных опций внутри определенного разреза.

2. Сконструированная форма дает возможность отправить запрос на Statdirectory/{apikod} с использованием параметров freq=, start=, end=, {dimension}=, id_api= для отображения графика.

См. [test.pdf](https://github.com/artemworks/nbu/blob/master/opendata-explorer/test.pdf) и test.php

___________________

Рекомендации по API НБУ:

1. В ресурсе Statdirectory периоды просто отображают доступные интервалы между показателями "на дату". Для отображения "за период" (за месяц, квартал, год) необходимо делать дополнительные вычисления. Желательно дать возможность выбора: "на дату" - по умолчанию, "за период" - выдача модифицированных данных по запросу с параметром freq=.

2. В ресурсе Dimensions необходимо проверить названия разделов. Например, название разреза "Складові MACRO-покзників" отображается с опечаткой (пропущена буква).

3. В ресурсе Dimensions/{dimension} необходимо проверить доступность и содержание разрезов. Например, разрез "Сектора економіки" odk070 недоступен. Разрез "Територія" частично дублирует "Регіони", при этом он используется в датасете "Ціни";)

![Alt text](/opendata-explorer/ss/05.png?raw=true "Параметри групи даних Iнфляцiя")

4. В ресурсе Statdirectory/{apikod} мы получаем массив объектов, в свойствах которых отсутствует единица измерения, соответственно не понятно это в штуках, процентах, в тысячах, млн, млрд? Это гривны или долл США? Желательно вывести эту информацию в свойствах и/или подкорректировать tzep, т.к. он у всех объектов одинаковый.

5. В ресурсе Statdirectory/{apikod}, уточняя его по id_api, start и end, получаем даты в человекочинаемом формате, а не машинном, а также в произвольном порядке. Из-за этого нужно дополнительно работать с датой, чтобы конвертировать ее из DD.MM.YYYY и затем использовать функцию сортировки. Желательно даты выводить в UNIX timestamp или хотя бы YYYYMMDD.

___________________

Скриншоты приложения:

![Alt text](/opendata-explorer/ss/01.png?raw=true "Грошові агрегати - Грошова маса - Усі сектори")

![Alt text](/opendata-explorer/ss/02.png?raw=true "Валовий зовнішній борг - Усього")

![Alt text](/opendata-explorer/ss/03.png?raw=true "Основні показники діяльності банків - Кредити, що надані фізичним особам - Графік")

![Alt text](/opendata-explorer/ss/04.png?raw=true "Основні показники діяльності банків - Кредити, що надані фізичним особам - Табличний вигляд")

___________________


[DEMO](http://test.roomian.org/opendata-explorer/ "DEMO")

